{
  "version": 3,
  "sources": ["Settings.svelte", "NodeList.svelte", "ActionList.svelte", "App.svelte"],
  "sourcesContent": ["<script>\r\n\texport let useRfc = null;\r\n\texport let useCommitMessage = null;\r\n\texport let updateName = null;\r\n\texport let saveToFigmaVersionHistory = null;\r\n\r\n\tfunction setSetting(name, value) {\r\n\t\tparent.postMessage(\r\n\t\t\t{\r\n\t\t\t\tpluginMessage: {\r\n\t\t\t\t\ttype: \"updateSettings\",\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\t[name]: value,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t\"*\"\r\n\t\t);\r\n\t}\r\n</script>\r\n\r\n<details>\r\n\t<summary>Documentwide Settings</summary>\r\n\r\n\t{#if useRfc !== null}\r\n\t\t<div>\r\n\t\t\t<label for=\"use-rfc\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tid=\"use-rfc\"\r\n\t\t\t\t\tbind:checked={useRfc}\r\n\t\t\t\t\ton:change={setSetting(\"useRfc\", useRfc)}\r\n\t\t\t\t/>\r\n\t\t\t\tUse \"request for comments\" workflow.</label\r\n\t\t\t>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t{#if useCommitMessage !== null}\r\n\t\t<div>\r\n\t\t\t<label for=\"use-commit-message\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tid=\"use-commit-message\"\r\n\t\t\t\t\tbind:checked={useCommitMessage}\r\n\t\t\t\t\ton:change={setSetting(\"useCommitMessage\", useCommitMessage)}\r\n\t\t\t\t/>\r\n\t\t\t\tUse commit messages.</label\r\n\t\t\t>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t{#if updateName !== null}\r\n\t\t<div>\r\n\t\t\t<label for=\"update-name\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tid=\"update-name\"\r\n\t\t\t\t\tbind:checked={updateName}\r\n\t\t\t\t\ton:change={setSetting(\"updateName\", updateName)}\r\n\t\t\t\t/>\r\n\t\t\t\tUse version appendix (f.e. \"@1.0.0\") at Node names.</label\r\n\t\t\t>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t{#if saveToFigmaVersionHistory !== null}\r\n\t\t<div>\r\n\t\t\t<label for=\"save-to-figma-version-history\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tid=\"save-to-figma-version-history\"\r\n\t\t\t\t\tbind:checked={saveToFigmaVersionHistory}\r\n\t\t\t\t\ton:change={setSetting(\r\n\t\t\t\t\t\t\"saveToFigmaVersionHistory\",\r\n\t\t\t\t\t\tsaveToFigmaVersionHistory\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t\tIssue the save of a new Figma file version alongside with the save of\r\n\t\t\t\ta new version tag (\"Major\", \"Minor\", \"Patch\", \"Request for Comments\",\r\n\t\t\t\t\"Release\" and \"Initial\").</label\r\n\t\t\t>\r\n\t\t</div>\r\n\t{/if}\r\n</details>\r\n\r\n<style>\r\n\tdetails {\r\n\t\tmargin-top: 2ex;\r\n\t\tpadding: 1.2ex;\r\n\r\n\t\tborder-top: 1px solid #e2e2e2;\r\n\r\n\t\tfont-size: 10px;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\tsummary {\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 1ex;\r\n\t}\r\n\r\n\tdetails:hover {\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\tdetails div {\r\n\t\tmargin: 2ex 0;\r\n\t}\r\n\tdetails div label input {\r\n\t\tmargin: 0;\r\n\t}\r\n\tdetails div label {\r\n\t\tdisplay: flex;\r\n\t\tgap: 1ex;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\r\n", "<table>\r\n\t<tr>\r\n\t\t<th>Name</th>\r\n\t\t<th>Version</th>\r\n\t</tr>\r\n\t{#each nodes as node} \r\n\t<tr>\r\n\t\t<td>{node.name}</td>\r\n\t\t<td class=\"version\">{node.version || 'not versioned'}</td>\r\n\t</tr>\r\n\t{/each}\r\n</table>\r\n\r\n<style>\r\n\ttable {\r\n\t\tfont-size: 11px;\r\n\t\tfont-weight: 400;\r\n\t\ttext-align: left;\r\n\t\ttable-layout: fixed;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\tth {\r\n\t\tfont-size: 10px;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 2px;\r\n\t}\r\n\r\n\ttable > tr > th {\r\n\t\twidth: 70%\r\n\t}\r\n\r\n\t.version {\r\n\t\tfont-variant-numeric: tabular-nums lining-nums;\r\n\t}\r\n</style>\r\n\r\n<script>\r\n\texport let nodes = [];\r\n</script>\r\n", "<script>\r\n\timport { debounce } from \"lodash\";\r\n\r\n\texport let actions = [];\r\n\texport let commitMessage = null;\r\n\texport let useCommitMessage = null;\r\n\r\n\tlet selection = \"keep\";\r\n\r\n\tconst commitMessageMaxLength = 144;\r\n\tconst labels = {\r\n\t\tkeep: {\r\n\t\t\tlabel: \"Keep\",\r\n\t\t\tdescription: \"\",\r\n\t\t},\r\n\t\tinitial: {\r\n\t\t\tlabel: \"Initial\",\r\n\t\t\tdescription: \"Start versioning for node\",\r\n\t\t},\r\n\t\tmajor: {\r\n\t\t\tlabel: \"Major\",\r\n\t\t\tdescription: \"Change may break backend\",\r\n\t\t},\r\n\t\tminor: {\r\n\t\t\tlabel: \"Minor\",\r\n\t\t\tdescription: \"Change may affect backend\",\r\n\t\t},\r\n\t\tpatch: {\r\n\t\t\tlabel: \"Patch\",\r\n\t\t\tdescription: \"Fix not affecting backend\",\r\n\t\t},\r\n\t\trfc: {\r\n\t\t\tlabel: \"Request for Comments\",\r\n\t\t\tdescription: \"New iteration for draft\",\r\n\t\t},\r\n\t\trelease: {\r\n\t\t\tlabel: \"Release\",\r\n\t\t\tdescription: \"\",\r\n\t\t},\r\n\t\tfromName: {\r\n\t\t\tlabel: \"From Appendix\",\r\n\t\t\tdescription: \"Set inner version by appendix\",\r\n\t\t},\r\n\t\ttoName: {\r\n\t\t\tlabel: \"To Appendix\",\r\n\t\t\tdescription: \"Set appendix by inner version\",\r\n\t\t},\r\n\t\trevert: {\r\n\t\t\tlabel: \"Revert\",\r\n\t\t\tdescription: \"Revert version tag to previous\",\r\n\t\t},\r\n\t};\r\n\r\n\t$: isCommitMessageDisabled = [\r\n\t\t\"keep\",\r\n\t\t\"revert\",\r\n\t\t\"fromName\",\r\n\t\t\"toName\",\r\n\t].includes(selection);\r\n\t$: commitMessageRemainingCharacters =\r\n\t\tcommitMessageMaxLength -\r\n\t\t(commitMessage !== null ? commitMessage.length : 0);\r\n\r\n\tfunction currentVersionFor(label) {\r\n\t\tconst currentAction = actions.find((a) => a.label === label);\r\n\r\n\t\tif (label === \"toName\") {\r\n\t\t\treturn currentAction.nameVersion;\r\n\t\t} else {\r\n\t\t\tconst action = actions.find((a) => a.label === \"keep\");\r\n\r\n\t\t\treturn action.version || \"not versioned\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction saveAction(selection, actions) {\r\n\t\tconst action = actions.find((a) => a.label === selection);\r\n\r\n\t\tparent.postMessage(\r\n\t\t\t{\r\n\t\t\t\tpluginMessage: {\r\n\t\t\t\t\ttype: \"updateVersion\",\r\n\t\t\t\t\tcommitMessage: useCommitMessage ? commitMessage : undefined,\r\n\t\t\t\t\taction,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t\"*\"\r\n\t\t);\r\n\r\n\t\tselection = \"keep\";\r\n\t}\r\n\r\n\tconst updateCommitMessage = debounce((e) => {\r\n\t\tconst action = actions.find((a) => a.nodeId);\r\n\t\tconst nodeId = action.nodeId;\r\n\r\n\t\tparent.postMessage(\r\n\t\t\t{\r\n\t\t\t\tpluginMessage: {\r\n\t\t\t\t\ttype: \"updateCommitMessage\",\r\n\t\t\t\t\tcommitMessage: e.target.value,\r\n\t\t\t\t\tnodeId,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t\"*\"\r\n\t\t);\r\n\t}, 266);\r\n</script>\r\n\r\n<div class=\"container\">\r\n\t<h4>Available Options</h4>\r\n\t{#each actions as action}\r\n\t\t<div class=\"list-element\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"radio\"\r\n\t\t\t\tname=\"action\"\r\n\t\t\t\tid={action.label}\r\n\t\t\t\tvalue={action.label}\r\n\t\t\t\tbind:group={selection}\r\n\t\t\t/>\r\n\t\t\t<label for={action.label}>\r\n\t\t\t\t<div class=\"header\">\r\n\t\t\t\t\t{labels[action.label].label}\r\n\t\t\t\t\t{#if labels[action.label].description}\r\n\t\t\t\t\t\t<span class=\"description\"\r\n\t\t\t\t\t\t\t>&middot;&nbsp;{labels[action.label].description}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"body\">\r\n\t\t\t\t\t{#if action.label !== \"keep\"}\r\n\t\t\t\t\t\t{#if action.label === \"toName\"}@{/if}{currentVersionFor(\r\n\t\t\t\t\t\t\taction.label\r\n\t\t\t\t\t\t)} &rarr;\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t\t{#if action.label === \"toName\" && action.version}@{/if}{action.version ||\r\n\t\t\t\t\t\t\"not versioned\"}\r\n\t\t\t\t</div>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t{/each}\r\n</div>\r\n\r\n{#if useCommitMessage}\r\n\t<label class=\"textarea-label\" for=\"commit-message\"\r\n\t\t>{commitMessageRemainingCharacters}</label\r\n\t>\r\n\t<div class=\"centered\">\r\n\t\t<textarea\r\n\t\t\tid=\"commit-message\"\r\n\t\t\tbind:value={commitMessage}\r\n\t\t\tdisabled={isCommitMessageDisabled}\r\n\t\t\ton:input={updateCommitMessage}\r\n\t\t\trows=\"3\"\r\n\t\t\tmaxlength=\"144\"\r\n\t\t\tplaceholder=\"What is changing with your release?\"\r\n\t\t/>\r\n\t</div>\r\n{/if}\r\n\r\n<div class=\"centered\">\r\n\t<button\r\n\t\ton:click={saveAction(selection, actions)}\r\n\t\tdisabled={!selection || selection === \"keep\"}\r\n\t>\r\n\t\tsave\r\n\t</button>\r\n</div>\r\n\r\n<style>\r\n\t.container {\r\n\t\tpadding: 2px;\r\n\t}\r\n\r\n\t.container h4 {\r\n\t\tfont-size: 10px;\r\n\t\tcolor: #777;\r\n\t\tmargin-top: 0;\r\n\t\tmargin-bottom: 1ex;\r\n\t}\r\n\r\n\tinput {\r\n\t\tvertical-align: super;\r\n\t}\r\n\r\n\tlabel {\r\n\t\tdisplay: inline-block;\r\n\t\tmargin-left: 0.6em;\r\n\t}\r\n\r\n\t.list-element {\r\n\t\tpadding: 1ex 0.4ex 0.8ex 0.4ex;\r\n\t\tmargin-bottom: 0.8ex;\r\n\t}\r\n\r\n\t.list-element:hover {\r\n\t\tbackground-color: #daebf7;\r\n\t}\r\n\r\n\t.header {\r\n\t\tfont-size: 10px;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #444;\r\n\t}\r\n\r\n\t.description {\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t.body {\r\n\t\tmargin-top: 1px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.centered {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\r\n\t\tmargin: 0 1ex 0 1ex;\r\n\t\tpadding: 0.2ex;\r\n\t}\r\n\r\n\t.centered button {\r\n\t\tfont-size: 14px;\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 0.35em 1.2em;\r\n\t\tmargin: 0 0.3em 0.3em 0;\r\n\t\ttext-align: center;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n\r\n\t.textarea-label {\r\n\t\tdisplay: inline-block;\r\n\t\ttext-align: right;\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: 100%;\r\n\t\tmargin: 0;\r\n\t\tpadding-right: 1.1em;\r\n\t\tfont-size: 10px;\r\n\t\tcolor: #888;\r\n\t}\r\n\t.centered textarea {\r\n\t\twidth: 100%;\r\n\t\tdisplay: inline-block;\r\n\t\theight: auto;\r\n\t\tpadding: 0.35em 0.6em;\r\n\t\tmargin: 0 0 0.66em 0;\r\n\r\n\t\tfont-family: Inter, sans-serif;\r\n\t\tfont-feature-settings: \"liga\", \"calt\";\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: 400;\r\n\t\tfont-stretch: 100%;\r\n\t}\r\n</style>\r\n", "<script>\r\n\timport { debounce } from \"lodash\";\r\n\timport { onMount } from \"svelte\";\r\n\timport Settings from \"./Settings.svelte\";\r\n\timport NodeList from \"./NodeList.svelte\";\r\n\timport ActionList from \"./ActionList.svelte\";\r\n\r\n\tlet type = \"loading\";\r\n\tlet data = null;\r\n\tlet history = null;\r\n\tlet settings = null;\r\n\tlet commitMessage = null;\r\n\r\n\tonMount(() => {\r\n\t\tparent.postMessage({ pluginMessage: { type: \"settings\" } }, \"*\");\r\n\t});\r\n\r\n\tconst resizeUi = debounce((node) => {\r\n\t\tif (node) {\r\n\t\t\tparent.postMessage(\r\n\t\t\t\t{\r\n\t\t\t\t\tpluginMessage: {\r\n\t\t\t\t\t\ttype: \"resize\",\r\n\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t\"*\"\r\n\t\t\t);\r\n\t\t}\r\n\t}, 66);\r\n\r\n\twindow.onmessage = (event) => {\r\n\t\tconst message = event.data.pluginMessage;\r\n\r\n\t\tswitch (message.type) {\r\n\t\t\tcase \"settings\":\r\n\t\t\t\tsettings = message.settings;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\ttype = message.type;\r\n\t\t\t\tdata = message.data;\r\n\t\t\t\thistory = message.history;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\thistory &&\r\n\t\t\t\t\thistory.length > 0 &&\r\n\t\t\t\t\t!history[0].version &&\r\n\t\t\t\t\thistory[0].commitMessage\r\n\t\t\t\t) {\r\n\t\t\t\t\tcommitMessage = history[0].commitMessage;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<div class=\"body\" use:resizeUi>\r\n\t{#if type === \"list\"}\r\n\t\t<NodeList nodes={data} />\r\n\t{:else if type === \"actions\"}\r\n\t\t<ActionList\r\n\t\t\tactions={data}\r\n\t\t\t{commitMessage}\r\n\t\t\tuseCommitMessage={settings && settings.useCommitMessage}\r\n\t\t/>\r\n\t{/if}\r\n\r\n\t{#if settings !== null}\r\n\t\t<Settings\r\n\t\t\tuseRfc={settings.useRfc}\r\n\t\t\tuseCommitMessage={settings.useCommitMessage}\r\n\t\t\tupdateName={settings.updateName}\r\n\t\t\tsaveToFigmaVersionHistory={settings.saveToFigmaVersionHistory}\r\n\t\t/>\r\n\t{/if}\r\n</div>\r\n\r\n<style>\r\n\t.body {\r\n\t\tfont-family: Inter, sans-serif;\r\n\t\tfont-feature-settings: \"liga\", \"calt\";\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: 400;\r\n\t\tfont-stretch: 100%;\r\n\t\tpadding: 1ex 1em;\r\n\t}\r\n</style>\r\n"],
  "mappings": ";AAuFC;AACC;AACA;AAEA;AAEA;AACA;;AAGD;AACC;AACA;;AAGD;AACC;;AAGD;AACC;;AAED;AACC;;AAED;AACC;AACA;AACA;;;;ACrGD;AACC;AACA;AACA;AACA;AACA;;AAGD;AACC;AACA;AACA;AACA;;AAGD;AACC;;AAGD;AACC;;;;ACwID;AACC;;AAGD;AACC;AACA;AACA;AACA;;AAGD;AACC;;AAGD;AACC;AACA;;AAGD;AACC;AACA;;AAGD;AACC;;AAGD;AACC;AACA;AACA;;AAGD;AACC;AACA;;AAGD;AACC;AACA;;AAGD;AACC;AACA;AAEA;AACA;;AAGD;AACC;AACA;AACA;AACA;AACA;AACA;;AAGD;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAED;AACC;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;AC9KD;AACC;AACA;AACA;AACA;AACA;AACA;;",
  "names": []
}
